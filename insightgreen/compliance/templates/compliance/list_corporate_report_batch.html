{% extends 'base.html' %}

{% block content %}
  <h2>List of Corporate ESG Reports</h2>

  {% if messages %}
    <div class="messages">
      {% for message in messages %}
        <p class="alert alert-info">{{ message }}</p>
      {% endfor %}
    </div>
  {% endif %}

  <table class="table table-bordered">
    <thead>
      <tr>
        <th>Document Title</th>
        <th>Organization Name (Batch)</th>
        <th>Peer Group Name (Batch)</th>
        <th>Industry Sector (Batch)</th>
        <th>Country/Region (Batch)</th>
        <th>Organization Type (Batch)</th>
        <th>Reporting Year</th>
        <th>Reporting Period</th>
        <th>Standards Applied</th>
        <th>Report Type</th>
        <th>Is Peer Report</th>
        <th>Is Confidential</th>
        <th>Action</th>
      </tr>
    </thead>
    <tbody>
      {% for report in reports %}
        <tr>
          <td>{{ report.document_title }}</td>
          <td>{{ report.batch.organization_name }}</td> <!-- ESGReportBatch related field -->
          <td>{{ report.batch.peer_group_name }}</td> <!-- ESGReportBatch related field -->
          <td>{{ report.batch.industry_sector }}</td> <!-- ESGReportBatch related field -->
          <td>{{ report.batch.country_region }}</td> <!-- ESGReportBatch related field -->
          <td>{{ report.batch.organization_type }}</td> <!-- ESGReportBatch related field -->
          <td>{{ report.reporting_year }}</td>
          <td>{{ report.reporting_period }}</td>
          <td>{{ report.standards_applied }}</td>
          <td>{{ report.report_type }}</td>
          <td>{{ report.is_peer_report }}</td>
          <td>{{ report.is_confidential }}</td>
          <td>
            <a href="{{ report.report_file.url }}" class="btn btn-primary" target="_blank">Download Report</a>

          </td>
        </tr>
      {% empty %}
        <tr>
          <td colspan="13">No corporate ESG reports found.</td>
        </tr>
      {% endfor %}
    </tbody>
  </table>
{% endblock %}
